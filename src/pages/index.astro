---
import "../assets/css/base.css"
import "@fontsource/cabin"
import Header from "../components/Header.astro";
import Button from "../components/Button.astro";
import useContent from "../utils/useContent";
import ServiceCard from "../components/preact/ServiceCard";
import type { Service } from "../../index.d";

const title = useContent("global.title")
const heroBanner = useContent("heroBanner")
const services = useContent("services") as Service[]
const servicesTitle = useContent("servicesTitle")
---

<html lang="fr">
	<head>
		<meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content={heroBanner.description || "Default description"}>
  <title>{heroBanner.title || title || "StockData"}</title>

  <!-- Open Graph tags for better social media sharing -->
  <meta property="og:title" content={heroBanner.title || "Default Title"} />
  <meta property="og:description" content={heroBanner.description || "Default description"} />
  <meta property="og:image" content={heroBanner.image || "/default-image.jpg"} />
  <meta property="og:url" content={globalThis.location?.href || "https://example.com"} />
  
  <!-- Twitter Card tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content={heroBanner.title || "Default Title"}>
  <meta name="twitter:description" content={heroBanner.description || "Default description"}>
  <meta name="twitter:image" content={heroBanner.image || "/default-image.jpg"}>
  <title>StockData</title>
	</head>
	<body class="bg-gray-100">
		<Header />
		<main class="mt-20">
			<section id="hero" class="w-full bg-black h-[450px] min-h-[450px]">
				<div class="flex flex-col h-full w-full gap-5 items-center justify-center">
					<div class="w-full sm:w-1/2 flex flex-col items-center justify-center gap-5">
						<h1 class="text-2xl sm:text-4xl text-center font-bold text-white">
							{heroBanner.title}
						</h1>
						<p class="text-xl text-white text-center">
							{heroBanner.description}
						</p>
					</div>
					<div class="flex sm:flex-row flex-col items-center justify-center gap-5 mt-5">
						<Button class="w-full sm:w-fit">{heroBanner.primaryButton}</Button>
						<Button class="w-full sm:w-fit" variant="secondary">{heroBanner.secondaryButton}</Button>
					</div>
				</div>
			</section>
			<section id="services" class="w-full bg-gray-100 min-h-[450px] mb-14 px-5">
				<div class="flex flex-col h-full w-full gap-5 pt-14">
					<h1 class="text-2xl sm:text-4xl text-center font-bold text-black">
						{servicesTitle}
					</h1>
					<div class="grid grid-cols-1 md:grid-cols-2 gap-5">
						{services.map((service) => (
							<ServiceCard {...service} />
						))}
					</div>
				</div>
			</section>
		</main>
		<footer class="py-10 text-center bg-black text-white">
			<p>&copy; {new Date().getFullYear()} {title}, Tous droits réservés.</p>
		  </footer>
	</body>
</html>

<script>

	// Add no opener no referrer to all links
	document.querySelectorAll('a').forEach(link => {
		link.setAttribute('rel', 'noreferrer noopener');
	});
</script>
